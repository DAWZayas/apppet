<template>
  <div>
   <v-toolbar fixed scroll-off-screen dark color="teal lighten-2">
      <v-toolbar-side-icon class="hidden-lg-and-up" @click.stop="drawer = !drawer"></v-toolbar-side-icon>
       <v-spacer></v-spacer>
      <nuxt-link to="/apppet/" class="logo">
        <img class="nom-app" src="~/assets/logos/nomApp.png">
      </nuxt-link>
      <v-spacer></v-spacer>
      <v-btn icon class="hidden-lg-and-up">
        <v-icon>search</v-icon>
      </v-btn>
      <div class="hidden-sm-and-down header-menu">
      <nuxt-link class="menu-link" to="../apppet"> Inicio  </nuxt-link>
      <nuxt-link class="menu-link" :class="{disabled:!isAuthenticated}" to="../candidates" > <span>Candidatos </span> </nuxt-link>
      <nuxt-link class="menu-link" :class="{disabled:!isAuthenticated}" to="" >Mensajes </nuxt-link>
      <nuxt-link class="menu-link" to="" >Noticias </nuxt-link>
      <nuxt-link class="menu-link" to="" >Ayuda </nuxt-link>
      <span v-if="isAuthenticated" class="menu-link" @click="onClick(out.methods)">Salir <template > ( {{ name }} ) </template> </span>
      <span v-if="!isAuthenticated" class="menu-link" @click="onClick(login.methods)">Identificarse </span>
      </div>
    </v-toolbar>
    <v-navigation-drawer
      temporary
      v-model="drawer"
      light
      fixed
      style="background-color: white; width:80%;"
    >
      <v-list class="pa-1 menu">
        <v-list-tile avatar >
          <v-list-tile-avatar>
            <img src="https://randomuser.me/api/portraits/men/85.jpg" />
          </v-list-tile-avatar>
          <v-list-tile-content class="nom-user">
            <v-list-tile-title>
              <template v-if="isAuthenticated">
                {{ name }}
              </template>
             </v-list-tile-title>
          </v-list-tile-content>
        </v-list-tile>
      </v-list>
      <v-list class="pt-0" dense>
        <v-divider></v-divider>
        <v-list-tile v-for="item in items" :key="item.title" @click="onClick(item.methods)">
          <v-list-tile-action>
            <v-icon>{{ item.icon }}</v-icon>
          </v-list-tile-action>
          <v-list-tile-content>
            <v-list-tile-title >{{ item.title }}</v-list-tile-title>
          </v-list-tile-content>
        </v-list-tile>
        <v-list-tile v-if="isAuthenticated" @click="onClick(out.methods)">
          <v-list-tile-action>
            <v-icon>{{ out.icon }}</v-icon>
          </v-list-tile-action>
          <v-list-tile-content>
            <v-list-tile-title >{{ out.title }}</v-list-tile-title>
          </v-list-tile-content>
        </v-list-tile>
        <v-list-tile v-if="!isAuthenticated" @click="onClick(out.methods)">
          <v-list-tile-action>
            <v-icon>{{ login.icon }}</v-icon>
          </v-list-tile-action>
          <v-list-tile-content>
            <v-list-tile-title >{{ login.title }}</v-list-tile-title>
          </v-list-tile-content>
        </v-list-tile>
      </v-list>
    </v-navigation-drawer>
  </div>
</template>
<script>
  import {mapActions, mapGetters} from 'vuex'
  export default {
    data () {
      return {
        drawer: null,
        items: [
          { title: 'Home', icon: 'dashboard', methods: 'home' },
          { title: 'Candidato', icon: 'pets', methods: 'candidate' },
          { title: 'Mensajes', icon: 'question_answer', methods: '' },
          { title: 'Noticias', icon: 'radio', methods: '' },
          { title: 'Ayuda', icon: 'help', methods: '' },
          { title: 'Busqueda', icon: 'search', methods: '' }
        ],
        out: { title: 'Salir', icon: 'close', methods: 'logout' },
        login: { title: 'Identificarse', icon: 'power_settings_new', methods: 'logout' }
      }
    },
    computed: {
      ...mapGetters({name: 'getDisplayName', isAuthenticated: 'isAuthenticated'})
    },
    methods: { ...mapActions(['logout']),
      onClick (f) {
        if (f === 'logout') {
          this.logout()
          this.$router.push('/')
        }
        if (f === 'home') {
          this.$router.push('/apppet')
        }
        if (f === 'candidate') {
          this.$router.push('/candidates')
        }
      }
    }
  }
</script>
<style lang="scss" scoped>

  body{
  overflow: hidden;
}

.nom-app {
	width: 120px;

}
.header-menu{
  text-decoration: none;
  color: white;
}
.menu-link {
  color: #fff;
  padding: 20px;
  text-decoration: none;
  transition:all 0.3s ease;
  font-weight: 800;
  margin-right: 10px;
}

.menu-link:hover {
  text-decoration: none;
  text-decoration: underline;
}

.menu {
  background-color: #4db6ac;
  width: 100%;
  margin-bottom: -1em;
}
</style>
